{"componentChunkName":"component---src-templates-post-template-jsx","path":"/python/django/orm-cheat-sheet/","result":{"data":{"site":{"siteMetadata":{"title":"Blog by 인간지능","subtitle":"깔끔한 프로그래밍","copyright":"© All rights reserved.","author":{"name":"인간지능","twitter":"#"},"disqusShortname":"bmh8993-github-io","url":"https://bmh8993.github.io/"}},"markdownRemark":{"id":"7effa2fd-cc35-5bb2-a968-24bb3a81ff8a","html":"<ol>\n<li><a href=\"#get_fields_list_of_model\">Get fields list of model</a></li>\n<li><a href=\"#update_use_django_model\">Update-use Django Model</a></li>\n<li><a href=\"#orm_filter_get_tips\">ORM filter/get tips!</a></li>\n</ol>\n<h2>Get fields list of model<a id=\"get_fields_list_of_model\"></a></h2>\n<ul>\n<li>모델의 필드 리스트를 얻는 방법</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">modelname<span class=\"token punctuation\">.</span>_meta<span class=\"token punctuation\">.</span>get_fields<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>example></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">Product<span class=\"token punctuation\">.</span>_meta<span class=\"token punctuation\">.</span>get_fields<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>django<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>AutoField<span class=\"token punctuation\">:</span> <span class=\"token builtin\">id</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n <span class=\"token operator\">&lt;</span>django<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">:</span> status<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n <span class=\"token operator\">&lt;</span>django<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">:</span> product_name<span class=\"token operator\">></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>advanced></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">fields_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nfields <span class=\"token operator\">=</span> Product<span class=\"token punctuation\">.</span>_meta<span class=\"token punctuation\">.</span>get_fields<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> field <span class=\"token keyword\">in</span> fields<span class=\"token punctuation\">:</span>\n  fields_list<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'status'</span><span class=\"token punctuation\">,</span>\n <span class=\"token string\">'product_name'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>Update use Django model<a id=\"update_use_django_model\"></a></h2>\n<h2>ORM filter, get tips!<a id=\"orm_filter_get_tips\"></a></h2>\n<ul>\n<li><code class=\"language-text\">filter</code> 또는 <code class=\"language-text\">get</code>을 할 때에 팁!</li>\n<li>꼭 인스턴스로만 접근 가능한 것이 아니라 인스턴스의 <code class=\"language-text\">id</code>값으로도 접근 가능하다.</li>\n<li>단, 생성시에는 filter, get과 달리 <code class=\"language-text\">인스턴스=인스턴스</code>의 식으로 사용해야한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># models.py</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">House</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n  <span class=\"token builtin\">type</span> <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>HouseType<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HouseType</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  type_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">apt <span class=\"token operator\">=</span> HouseType<span class=\"token punctuation\">(</span>\n    type_name<span class=\"token operator\">=</span><span class=\"token string\">\"apt\"</span>\n    <span class=\"token punctuation\">)</span>\napt<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\napt<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token number\">1</span>\n\nHouse<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n    name<span class=\"token operator\">=</span><span class=\"token string\">\"mh_house\"</span><span class=\"token punctuation\">,</span>\n    type_id<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mh_house <span class=\"token operator\">=</span> House<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token operator\">=</span>apt<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># QuerySet</span>\nmh_house <span class=\"token operator\">=</span> House<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>type_id<span class=\"token operator\">=</span>apt<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># QuerySet</span>\nmh_house <span class=\"token operator\">=</span> House<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token operator\">=</span>apt<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># QuerySet</span>\n\nmh_house <span class=\"token operator\">=</span> House<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token operator\">=</span>apt<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Instance</span>\nmh_house <span class=\"token operator\">=</span> House<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>type_id<span class=\"token operator\">=</span>apt<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Instance</span>\nmh_house <span class=\"token operator\">=</span> House<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token operator\">=</span>apt<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Instance</span></code></pre></div>\n<ul>\n<li>DB에 컬럼 생성시 자동으로 <code class=\"language-text\">_id</code>가 붙는데 이것을 사용한 것.</li>\n</ul>","fields":{"tagSlugs":["/tags/django/"],"slug":"/python/django/orm-cheat-sheet/"},"frontmatter":{"title":"Django / ORM cheat sheet","tags":["django"],"date":"2019-11-01T10:12:08.000Z","description":"Django orm cheat sheet","path":"/python/django/orm-cheat-sheet/","category":"Django"},"tableOfContents":"<ul>\n<li><a href=\"/python/django/orm-cheat-sheet/#get-fields-list-of-modela-idget_fields_list_of_modela\">Get fields list of model&#x3C;a id=\"get_fields_list_of_model\">&#x3C;/a></a></li>\n<li><a href=\"/python/django/orm-cheat-sheet/#update-use-django-modela-idupdate_use_django_modela\">Update use Django model&#x3C;a id=\"update_use_django_model\">&#x3C;/a></a></li>\n<li><a href=\"/python/django/orm-cheat-sheet/#orm-filter-get-tipsa-idorm_filter_get_tipsa\">ORM filter, get tips!&#x3C;a id=\"orm_filter_get_tips\">&#x3C;/a></a></li>\n</ul>","headings":[{"value":"Get fields list of model<a id=\"get_fields_list_of_model\"></a>","depth":2},{"value":"Update use Django model<a id=\"update_use_django_model\"></a>","depth":2},{"value":"ORM filter, get tips!<a id=\"orm_filter_get_tips\"></a>","depth":2}]}},"pageContext":{"slug":"/python/django/orm-cheat-sheet/"}},"staticQueryHashes":[]}